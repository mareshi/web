<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>OpenSeadragonでIIIF画像表示</title>
  <script src="https://cdn.jsdelivr.net/npm/openseadragon@4.1/build/openseadragon/openseadragon.min.js"></script>
  <!-- headタグ内 -->
<script src="https://cdn.jsdelivr.net/npm/openseadragonselection@1.0.2/dist/openseadragonselection.min.js">
// 上記のOpenSeadragon初期化後に追加
viewer.selection({
  onSelection: function(rect) {
    const imageSize = viewer.world.getItemAt(0).getContentSize();
    const pixelRect = {
      x: Math.round(rect.x * imageSize.x),
      y: Math.round(rect.y * imageSize.y),
      width: Math.round(rect.width * imageSize.x),
      height: Math.round(rect.height * imageSize.y)
    };
    alert(`座標(px): ${JSON.stringify(pixelRect)}`);
  }
});
  </script>
  <style>
    #viewer {
      width: 800px;
      height: 600px;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div id="viewer"></div>
  
  <script>
    const viewer = OpenSeadragon({
      id: "viewer",
      prefixUrl: "https://cdn.jsdelivr.net/npm/openseadragon@4.1/build/openseadragon/images/",
      tileSources: "https://dl.ndl.go.jp/api/iiif/2536303/manifest.json"
    });
  </script>

</body>
</html>
